"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[790],{895:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/manage_personal_access_token-118899a5932549b45765bf033cedc364.png"},1081:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/user_role_selection-44001a36a23067aa29081aa43b96834d.png"},1184:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>o});var i=n(4041);const t={},l=i.createContext(t);function r(e){const s=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:s},e.children)}},4329:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/user_management_page-01d939e55eee33726ea61f3448cc95e3.png"},4410:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/user_role_basic_details-4085a37d0e87f0c5840090037f9b7804.png"},5747:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/user_org_units_set-00af5dac5d27868e284f1c2cbc4eb5a8.png"},6797:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/user_avatar-2d69cb43154863534ef307dc5a2353fd.png"},6870:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/user_role_management_page-f88a94ec224aa1f28cb9e15f1196b62b.png"},7200:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/user_role_authorities-b6ae37dfa0725f0c46387f19af39ecc9.png"},7848:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/PAT_generation-01a1ebbaef8a8753e9a210510cdf5802.png"},8456:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"configuration/dhis2-access-settings/index","title":"DHIS2 Access Settings","description":"While FlexiPortal empowers you to have a secure public display of your data, it is important to adhere to DHIS2 security","source":"@site/docs/configuration/dhis2-access-settings/index.md","sourceDirName":"configuration/dhis2-access-settings","slug":"/configuration/dhis2-access-settings/","permalink":"/dhis2-public-portal/docs/configuration/dhis2-access-settings/","draft":false,"unlisted":false,"editUrl":"https://github.com/hisptz/dhis2-public-portal/tree/main/apps/docs/docs/configuration/dhis2-access-settings/index.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"configSidebar","previous":{"title":"Introduction","permalink":"/dhis2-public-portal/docs/configuration/intro"},"next":{"title":"General Settings","permalink":"/dhis2-public-portal/docs/configuration/general/"}}');var t=n(1085),l=n(1184);const r={sidebar_position:2},o="DHIS2 Access Settings",a={},c=[{value:"User Preparation",id:"user-preparation",level:2},{value:"Creating a User Role",id:"creating-a-user-role",level:3},{value:"Steps",id:"steps",level:4},{value:"Fill in:",id:"fill-in",level:5},{value:"Authorities to assign:",id:"authorities-to-assign",level:5},{value:"Creating a User",id:"creating-a-user",level:3},{value:"Steps",id:"steps-1",level:4},{value:"Fill in:",id:"fill-in-1",level:5},{value:"Generating a Public Access Token (PAT)",id:"generating-a-public-access-token-pat",level:2},{value:"Steps",id:"steps-2",level:3},{value:"Fill in:",id:"fill-in-2",level:4}];function d(e){const s={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"dhis2-access-settings",children:"DHIS2 Access Settings"})}),"\n",(0,t.jsx)(s.p,{children:"While FlexiPortal empowers you to have a secure public display of your data, it is important to adhere to DHIS2 security\nguidelines and make sure the user that will be used to authenticate the FlexiPortal only has the necessary authority."}),"\n",(0,t.jsxs)(s.p,{children:["To add another layer of security,\nFlexiPortal only uses DHIS2's ",(0,t.jsx)(s.a,{href:"https://docs.dhis2.org/en/use/user-guides/dhis-core-version-242/working-with-your-account/personal-access-tokens.html?h=personal+access+token",children:"**Personal Access Token\n**"}),"\nto access the DHIS2"]}),"\n",(0,t.jsxs)(s.p,{children:["This guide walks you\nthrough creating a low-access DHIS2 user to securely expose public data and a ",(0,t.jsx)(s.strong,{children:"Personal Access Token(PAT)"}),".\nThe token will be set in the ",(0,t.jsx)(s.strong,{children:"FlexiPortal"})," to authenticate it to your DHIS2 instance."]}),"\n",(0,t.jsx)(s.h2,{id:"user-preparation",children:"User Preparation"}),"\n",(0,t.jsx)(s.p,{children:"This section will explain how to define a lightweight user account whose sole purpose is to authenticate the FlexiPortal"}),"\n",(0,t.jsx)(s.h3,{id:"creating-a-user-role",children:"Creating a User Role"}),"\n",(0,t.jsx)(s.p,{children:"Create a user role with the minimal set of authorities needed to view public DHIS2 visualizations and other resources\nvia the DHIS2 API."}),"\n",(0,t.jsx)(s.h4,{id:"steps",children:"Steps"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Log in as a superuser (",(0,t.jsx)(s.code,{children:"admin"}),")."]}),"\n",(0,t.jsxs)(s.li,{children:["Go to:",(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Apps -> Users -> User role"})]}),"\n",(0,t.jsxs)(s.li,{children:["Click ",(0,t.jsx)(s.strong,{children:'"New"'}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"User role creation",src:n(6870).A+"",width:"1917",height:"961"})}),"\n",(0,t.jsx)(s.h5,{id:"fill-in",children:"Fill in:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Name"}),": The name for this user role.","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"Public Portal Access"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Description"}),": This is a short, clear description of what this role is for.","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"Allows public access to dashboards and visualizations"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Authorities assignment",src:n(4410).A+"",width:"773",height:"304"})}),"\n",(0,t.jsx)(s.h5,{id:"authorities-to-assign",children:"Authorities to assign:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"App authorities"}),": Manage access to apps, allowing the user to view public visualizations. Select the following:","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"App: Dashboard"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"App: Data visualizer app"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"App authorities",src:n(7200).A+"",width:"825",height:"411"})}),"\n",(0,t.jsx)(s.admonition,{type:"warning",children:(0,t.jsxs)(s.p,{children:["Do ",(0,t.jsx)(s.strong,{children:"NOT"})," assign any metadata authorities, tracker, import/export or system authorities."]})}),"\n",(0,t.jsxs)(s.ol,{start:"4",children:["\n",(0,t.jsxs)(s.li,{children:["Scroll all the way down and Click ",(0,t.jsx)(s.strong,{children:"Create role"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"creating-a-user",children:"Creating a User"}),"\n",(0,t.jsx)(s.p,{children:"Create a user, used for token-based public access. This user is not for human login \u2014 it will mainly be used by the\nFlexiPortal to fetch DHIS2 visualizations."}),"\n",(0,t.jsx)(s.h4,{id:"steps-1",children:"Steps"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Go to:",(0,t.jsx)(s.br,{}),"\n",(0,t.jsx)(s.strong,{children:"Apps ->  Users -> User"})]}),"\n",(0,t.jsxs)(s.li,{children:["Click ",(0,t.jsx)(s.strong,{children:'"New"'}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Visualization Display Example",src:n(4329).A+"",width:"1919",height:"959"})}),"\n",(0,t.jsx)(s.h5,{id:"fill-in-1",children:"Fill in:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Username"}),": This is the username for the user","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"public.portal"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"First name"}),": This is the first name of the user","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"Public"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Surname"}),": This is the surname of the user","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"Portal"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Password"}),": Set a strong, secure password."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Organisation units access"}),": Assign the top-level OU (e.g., ",(0,t.jsx)(s.code,{children:"National"}),") or where the visualizations are scoped.\n",(0,t.jsx)(s.img,{alt:"Visualization Display Example",src:n(5747).A+"",width:"699",height:"910"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"User role"}),": Select the previously configured user role. In this case our user role was named ",(0,t.jsx)(s.code,{children:"Public Portal Access"}),"\n",(0,t.jsx)(s.img,{alt:"Visualization Display Example",src:n(1081).A+"",width:"778",height:"431"})]}),"\n"]}),"\n",(0,t.jsxs)(s.ol,{start:"3",children:["\n",(0,t.jsxs)(s.li,{children:["Scroll all the way down and Click ",(0,t.jsx)(s.strong,{children:"Create user"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"generating-a-public-access-token-pat",children:"Generating a Public Access Token (PAT)"}),"\n",(0,t.jsxs)(s.p,{children:["You need to generate a ",(0,t.jsx)(s.strong,{children:"GET-only Personal Access Token (PAT)"})," for the user ",(0,t.jsx)(s.code,{children:"public.portal"})," to use in the FlexiPortal."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Visualization Display Example",src:n(6797).A+"",width:"494",height:"489"})}),"\n",(0,t.jsx)(s.h3,{id:"steps-2",children:"Steps"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Log in as ",(0,t.jsx)(s.code,{children:"public.portal"})]}),"\n",(0,t.jsxs)(s.li,{children:["Click the ",(0,t.jsx)(s.strong,{children:"avatar icon"})," (top-right) \u2192 ",(0,t.jsx)(s.strong,{children:'"Edit profile"'})]}),"\n",(0,t.jsxs)(s.li,{children:["Go to the ",(0,t.jsx)(s.strong,{children:'"Personal access tokens"'})," tab"]}),"\n",(0,t.jsxs)(s.li,{children:["Click ",(0,t.jsx)(s.strong,{children:'"Generate new token"'}),"\n",(0,t.jsx)(s.img,{alt:"Visualization Display Example",src:n(7848).A+"",width:"1919",height:"956"})]}),"\n"]}),"\n",(0,t.jsx)(s.h4,{id:"fill-in-2",children:"Fill in:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Token context"}),": The context where this token will be used, for this case select ",(0,t.jsx)(s.code,{children:"Server/script context"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Expiry"}),": Set to a reasonable duration, you can set the lifetime of this token to be how ever long you want (e.g.,\n90 days)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Allowed HTTP methods"}),": These are the HTTP methods that this token will need, for this case choose \u2705 ",(0,t.jsx)(s.code,{children:"GET"})," only. If\nyou want to use the feedback form module present in the FlexiPortal, you will need to also select ",(0,t.jsx)(s.code,{children:"POST"})," method as\nwell."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Visualization Display Example",src:n(9424).A+"",width:"786",height:"795"})}),"\n",(0,t.jsxs)(s.ol,{start:"5",children:["\n",(0,t.jsxs)(s.li,{children:["Click ",(0,t.jsx)(s.strong,{children:"Generate new token"})," and then click on ",(0,t.jsx)(s.strong,{children:"Copy to clipboard"})," immediately (shown only once!)"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Visualization Display Example",src:n(895).A+"",width:"959",height:"364"})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"You'll only be shown your token once.\nMake sure to copy your personal access token at this time. You won't be able to see it again. Store this token\nsecurely (in environment variables) \u2014 it's your key to public access."}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["You can then use your ",(0,t.jsx)(s.code,{children:"PAT"})," to set up your FlexiPortal"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},9424:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/generate_new_PAT-5e63dad50dc1f38b8fec6d73e9ae4ad7.png"}}]);