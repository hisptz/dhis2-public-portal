"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[817],{1184:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>t});var l=i(4041);const r={},o=l.createContext(r);function s(e){const n=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),l.createElement(o.Provider,{value:n},e.children)}},8313:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>a,frontMatter:()=>s,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"deployment/portal/deploy_to_vercel","title":"Deploying to Vercel","description":"Vercel is a cloud platform for static sites and Serverless Functions that\'s optimized for Next.js applications. This guide will walk you through deploying the DHIS2 Public Portal to Vercel.","source":"@site/docs/deployment/portal/deploy_to_vercel.md","sourceDirName":"deployment/portal","slug":"/deployment/portal/deploy_to_vercel","permalink":"/dhis2-public-portal/docs/deployment/portal/deploy_to_vercel","draft":false,"unlisted":false,"editUrl":"https://github.com/hisptz/dhis2-public-portal/tree/main/apps/docs/docs/deployment/portal/deploy_to_vercel.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"deploySidebar","previous":{"title":"Deploying using Docker","permalink":"/dhis2-public-portal/docs/deployment/portal/deploy_using_docker"},"next":{"title":"Deploying on Non-Root URLs","permalink":"/dhis2-public-portal/docs/deployment/portal/deploying_on_non_root"}}');var r=i(1085),o=i(1184);const s={sidebar_position:2},t="Deploying to Vercel",c={},d=[{value:"Quick Deploy",id:"quick-deploy",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Deployment Steps",id:"deployment-steps",level:2},{value:"Option 1: Deploy from GitHub Repository",id:"option-1-deploy-from-github-repository",level:3},{value:"Option 2: Deploy Using Vercel CLI",id:"option-2-deploy-using-vercel-cli",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Custom Domains",id:"custom-domains",level:2},{value:"Continuous Deployment",id:"continuous-deployment",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Limitations",id:"limitations",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"deploying-to-vercel",children:"Deploying to Vercel"})}),"\n",(0,r.jsx)(n.p,{children:"Vercel is a cloud platform for static sites and Serverless Functions that's optimized for Next.js applications. This guide will walk you through deploying the DHIS2 Public Portal to Vercel."}),"\n",(0,r.jsx)(n.h2,{id:"quick-deploy",children:"Quick Deploy"}),"\n",(0,r.jsx)(n.p,{children:"For quick deploy to vercel, you can use the button below:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://vercel.com/new/clone?repository-url=https://github.com/hisptz/dhis2-public-portal&env=DHIS2_BASE_URL,DHIS2_BASE_PAT_TOKEN&envDescription=The%20DHIS2%20base%20URL%20and%20PAT%20token%20variables%20enable%20you%20to%20connect%20your%20deployed%20portal%20to%20a%20DHIS2%20instance&project-name=dhis2-public-portal&repository-name=dhis2-public-portal&root-directory=apps/portal&install-command=yarn%20install&build-command=turbo%20build%20--filter%20portal&skip-unaffected=true",children:(0,r.jsx)(n.img,{src:"https://vercel.com/button",alt:"Deploy with Vercel"})})}),"\n",(0,r.jsxs)(n.p,{children:["This requires you to have a ",(0,r.jsx)(n.a,{href:"https://vercel.com/",children:"vercel"})," account."]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before you begin, ensure you have the following:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.a,{href:"https://vercel.com/signup",children:"Vercel account"})]}),"\n",(0,r.jsx)(n.li,{children:"A GitHub, GitLab, or Bitbucket account (for connecting your repository)"}),"\n",(0,r.jsx)(n.li,{children:"Access to a DHIS2 instance"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deployment-steps",children:"Deployment Steps"}),"\n",(0,r.jsx)(n.h3,{id:"option-1-deploy-from-github-repository",children:"Option 1: Deploy from GitHub Repository"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Fork or Clone the Repository"})}),"\n",(0,r.jsxs)(n.p,{children:["Fork the ",(0,r.jsx)(n.a,{href:"https://github.com/hisptz/dhis2-public-portal",children:"DHIS2 Public Portal repository"})," to your GitHub account."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Connect to Vercel"})}),"\n",(0,r.jsx)(n.p,{children:"a. Log in to your Vercel account"}),"\n",(0,r.jsx)(n.p,{children:'b. Click "Add New..." and select "Project"'}),"\n",(0,r.jsx)(n.p,{children:"c. Import your forked repository"}),"\n",(0,r.jsx)(n.p,{children:"d. Configure the project:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Framework Preset: Next.js"}),"\n",(0,r.jsx)(n.li,{children:"Root Directory: apps/portal"}),"\n",(0,r.jsx)(n.li,{children:"Build Command: yarn build"}),"\n",(0,r.jsx)(n.li,{children:"Output Directory: .next"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"e. Add Environment Variables:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DHIS2_BASE_URL: URL of your DHIS2 instance"}),"\n",(0,r.jsx)(n.li,{children:"Add any other required environment variables"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:'f. Click "Deploy"'}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Verify Deployment"})}),"\n",(0,r.jsx)(n.p,{children:"Once the deployment is complete, Vercel will provide you with a URL to access your application."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"option-2-deploy-using-vercel-cli",children:"Option 2: Deploy Using Vercel CLI"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install Vercel CLI"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install -g vercel\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Clone the Repository"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone --single-branch --branch main https://github.com/hisptz/dhis2-public-portal.git\ncd dhis2-public-portal\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Login to Vercel"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"vercel login\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Deploy"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd apps/portal\nvercel\n"})}),"\n",(0,r.jsx)(n.p,{children:"Follow the prompts to configure your deployment."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsx)(n.p,{children:"Configure the following environment variables in your Vercel project settings:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Variable"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Required"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"DHIS2_BASE_URL"}),(0,r.jsx)(n.td,{children:"URL of your DHIS2 instance"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"DHIS2_BASE_PAT_TOKEN"}),(0,r.jsx)(n.td,{children:"DHIS2 PAT for authenticating your DHIS2 instance"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"custom-domains",children:"Custom Domains"}),"\n",(0,r.jsx)(n.p,{children:"To use a custom domain with your Vercel deployment:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Go to your project in the Vercel dashboard"}),"\n",(0,r.jsx)(n.li,{children:'Navigate to "Settings" > "Domains"'}),"\n",(0,r.jsx)(n.li,{children:"Add your custom domain and follow the verification steps"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"continuous-deployment",children:"Continuous Deployment"}),"\n",(0,r.jsx)(n.p,{children:"Vercel automatically sets up continuous deployment from your connected repository. When you push changes to your repository, Vercel will automatically build and deploy the updated application."}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.p,{children:"If you encounter issues with your Vercel deployment:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Build Errors"})}),"\n",(0,r.jsx)(n.p,{children:"Check the build logs in the Vercel dashboard for specific error messages."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Runtime Errors"})}),"\n",(0,r.jsx)(n.p,{children:"Use the Vercel logs feature to view runtime logs and identify issues."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"CORS Issues"})}),"\n",(0,r.jsx)(n.p,{children:"Ensure your DHIS2 instance allows requests from your Vercel domain."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Environment Variables"})}),"\n",(0,r.jsx)(n.p,{children:"Verify that all required environment variables are correctly set in the Vercel project settings."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"limitations",children:"Limitations"}),"\n",(0,r.jsx)(n.p,{children:"When deploying to Vercel, be aware of the following limitations:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Vercel has usage limits on the free tier"}),"\n",(0,r.jsx)(n.li,{children:"Serverless functions have execution time limits"}),"\n",(0,r.jsx)(n.li,{children:"Some features might require a paid Vercel plan for production use"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://vercel.com/docs",children:"Vercel Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://vercel.com/solutions/nextjs",children:"Next.js on Vercel"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://vercel.com/docs/concepts/projects/environment-variables",children:"Environment Variables in Vercel"})}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);