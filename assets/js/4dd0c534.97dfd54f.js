"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[258],{1184:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>s});var a=n(4041);const o={},i=a.createContext(o);function l(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),a.createElement(i.Provider,{value:t},e.children)}},8619:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>s,default:()=>c,frontMatter:()=>l,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"deployment/portal/deploy_using_pm2","title":"Deploying using PM2","description":"PM2 is a production process manager for Node.js applications that helps you keep your app","source":"@site/docs/deployment/portal/deploy_using_pm2.md","sourceDirName":"deployment/portal","slug":"/deployment/portal/deploy_using_pm2","permalink":"/dhis2-public-portal/docs/deployment/portal/deploy_using_pm2","draft":false,"unlisted":false,"editUrl":"https://github.com/hisptz/dhis2-public-portal/tree/main/apps/docs/docs/deployment/portal/deploy_using_pm2.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"deploySidebar","previous":{"title":"Deploying to Vercel","permalink":"/dhis2-public-portal/docs/deployment/portal/deploy_to_vercel"},"next":{"title":"Deploying on Non-Root URLs","permalink":"/dhis2-public-portal/docs/deployment/portal/deploying_on_non_root"}}');var o=n(1085),i=n(1184);const l={sidebar_position:3},s="Deploying using PM2",r={},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Deployment steps",id:"deployment-steps",level:2},{value:"1. Download the <code>portal</code> application from the releases page",id:"1-download-the-portal-application-from-the-releases-page",level:3},{value:"2. Unzip the portal app",id:"2-unzip-the-portal-app",level:3},{value:"3. Navigate to the portal folder",id:"3-navigate-to-the-portal-folder",level:3},{value:"4. Install PM2",id:"4-install-pm2",level:3},{value:"5. Start the application using the provided PM2 configuration",id:"5-start-the-application-using-the-provided-pm2-configuration",level:3},{value:"6. Save pm2 running configuration",id:"6-save-pm2-running-configuration",level:3},{value:"Enabling automatically starting after system reboot",id:"enabling-automatically-starting-after-system-reboot",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"deploying-using-pm2",children:"Deploying using PM2"})}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.a,{href:"https://pm2.keymetrics.io/",children:"PM2"})," is a production process manager for Node.js applications that helps you keep your app\nalive forever and reload it without downtime."]}),"\n",(0,o.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(t.p,{children:["This requires you to have ",(0,o.jsx)(t.code,{children:"node > 20"})," installed in your sytem."]}),"\n",(0,o.jsx)(t.h2,{id:"deployment-steps",children:"Deployment steps"}),"\n",(0,o.jsx)(t.p,{children:"To deploy the portal app using PM2:"}),"\n",(0,o.jsxs)(t.h3,{id:"1-download-the-portal-application-from-the-releases-page",children:["1. Download the ",(0,o.jsx)(t.code,{children:"portal"})," application from the ",(0,o.jsx)(t.a,{href:"https://github.com/hisptz/dhis2-public-portal/releases",children:"releases"})," page"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"# Make sure to replace `<app-version>` with the intended version of the app.\n   wget https://github.com/hisptz/dhis2-public-portal/releases/download/v<app-version>/portal-<app-version>.zip -O portal.zip\n"})}),"\n",(0,o.jsx)(t.h3,{id:"2-unzip-the-portal-app",children:"2. Unzip the portal app"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"   unzip portal.zip -d portal\n"})}),"\n",(0,o.jsx)(t.h3,{id:"3-navigate-to-the-portal-folder",children:"3. Navigate to the portal folder"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"cd portal\n"})}),"\n",(0,o.jsx)(t.h3,{id:"4-install-pm2",children:"4. Install PM2"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"   corepack enable \n   yarn global add pm2\n"})}),"\n",(0,o.jsx)(t.h3,{id:"5-start-the-application-using-the-provided-pm2-configuration",children:"5. Start the application using the provided PM2 configuration"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"  pm2 start pm2.config.js\n"})}),"\n",(0,o.jsx)(t.h3,{id:"6-save-pm2-running-configuration",children:"6. Save pm2 running configuration"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"   pm2 save\n"})}),"\n",(0,o.jsx)(t.h2,{id:"enabling-automatically-starting-after-system-reboot",children:"Enabling automatically starting after system reboot"}),"\n",(0,o.jsx)(t.p,{children:"To ensure the application starts automatically after system reboot, PM2 can be configured to start at startup and it\nwill start the application as well. To set this up run:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"   pm2 startup\n"})})]})}function c(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);